{
  "id": "bit_dekt_quanx",
  "name": "北理工第二课堂助手",
  "author": "@Bigzhangbig",
  "icon": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/BIT.png",
  "repo": "https://github.com/Bigzhangbig/bit-dekt-quanx",
  "onInstall": {
    "title": "安装重写规则 - Install Rewrite Rules",
    "message": "是否自动安装仓库内的 Quantumult X / Loon / Surge 重写配置？",
    "install": {
      "QuanX": "quantumult-x:///add-resource?remote-resource=%7B%22rewrite_remote%22%3A%5B%22https%3A%2F%2Fraw.githubusercontent.com%2FBigzhangbig%2Fbit-dekt-quanx%2Fmain%2Fbox%2Frewrite%2Fbit-dekt-quanx.rewrite.quanx.conf%22%2C%22https%3A%2F%2Fraw.githubusercontent.com%2FBigzhangbig%2Fbit-dekt-quanx%2Fmain%2Fcard_rewrite.snippet%22%5D%7D",
      "Loon": "loon://import?plugin=https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/box/rewrite/bit-dekt-quanx.rewrite.loon.plugin,https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/card_rewrite.snippet",
      "Surge": "surge:///install-module?url=https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/box/rewrite/bit-dekt-quanx.rewrite.surge.sgmodule,https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/card_rewrite.snippet"
    }
  },
  "apps": [
    {
      "id": "bit_dekt",
      "name": "北理工第二课堂",
      "keys": [
        "bit_sc_headers",
        "bit_sc_cache",
        "bit_sc_unenroll_course_id",
        "bit_sc_blacklist",
        "bit_sc_blacklist_keywords",
        "bit_sc_debug",
        "bit_sc_notify_no_update",
        "bit_sc_pickup_mode",
        "bit_sc_random_delay",
        "bit_sc_signup_list",
        "bit_sc_auto_sign_all",
        "bit_sc_runtime_sign_ids",
        "bit_sc_auto_blacklist_categories"
      ],
      "descs_html": [
        "请先在 Quantumult X 中添加重写规则获取 Token。"
      ],
      "settings": [
        {
          "id": "bit_sc_unenroll_course_id",
          "name": "取消报名课程ID",
          "val": "",
          "type": "text",
          "desc": "输入要取消报名的课程ID（数字），留空则使用最后一次成功报名的课程ID"
        },
        {
          "id": "bit_sc_last_signup",
          "name": "最后成功报名课程(自动)",
          "val": "{}",
          "type": "text",
          "desc": "自动记录最后一次成功报名的课程，格式：{\"id\":123,\"title\":\"xx\",\"time\":\"2025-..\"}",
          "disabled": true
        },
        {
          "id": "bit_sc_blacklist",
          "name": "课程黑名单(ID)",
          "val": "",
          "type": "text",
          "desc": "输入不想报名的课程ID，用逗号分隔。取消报名成功后会自动添加到此黑名单"
        },
        {
          "id": "bit_sc_blacklist_keywords",
          "name": "黑名单关键词",
          "val": "",
          "type": "text",
          "desc": "输入黑名单关键词，用逗号分隔（如：研讨会,讲座）。课程标题包含任一关键词则不自动报名、不加入待报名列表"
        },
        {
          "id": "bit_sc_debug",
          "name": "开启调试日志",
          "val": false,
          "type": "boolean",
          "desc": "开启后打印详细日志，方便排查问题"
        },
        {
          "id": "bit_sc_notify_no_update",
          "name": "无新课程通知",
          "val": false,
          "type": "boolean",
          "desc": "开启后，即使没有新课程也会发送通知（心跳检测）"
        },
        {
          "id": "bit_sc_pickup_mode",
          "name": "开启捡漏模式",
          "val": false,
          "type": "boolean",
          "desc": "开启后，监控脚本会自动尝试报名所有进行中且有名额的课程"
        },
        {
          "id": "bit_sc_random_delay",
          "name": "随机延迟(秒)",
          "val": "0",
          "type": "text",
          "desc": "每次请求前的随机延迟上限(秒)，0为不延迟"
        },
        {
          "id": "bit_sc_signup_list",
          "name": "待报名列表(自动)",
          "val": "[]",
          "type": "textarea",
          "auto_grow": true,
          "rows": 5,
          "desc": "自动记录的待报名课程，格式：[{\"id\":123,\"title\":\"xx\",\"time\":\"2025-..\"}]。填0或过去时间可立即报名。"
        },
        {
          "id": "bit_sc_filter_college",
          "name": "学院筛选",
          "val": "不限",
          "type": "selects",
          "items": [
            {
              "key": "不限",
              "label": "不限"
            },
            {
              "key": "睿信书院",
              "label": "睿信书院"
            },
            {
              "key": "求是书院",
              "label": "求是书院"
            },
            {
              "key": "精工书院",
              "label": "精工书院"
            },
            {
              "key": "明德书院",
              "label": "明德书院"
            },
            {
              "key": "经管书院",
              "label": "经管书院"
            },
            {
              "key": "知艺书院",
              "label": "知艺书院"
            },
            {
              "key": "特立书院",
              "label": "特立书院"
            },
            {
              "key": "北京书院",
              "label": "北京书院"
            },
            {
              "key": "马克思主义学院",
              "label": "马克思主义学院"
            },
            {
              "key": "研究生院",
              "label": "研究生院"
            },
            {
              "key": "计算机学院",
              "label": "计算机学院"
            },
            {
              "key": "光电学院",
              "label": "光电学院"
            },
            {
              "key": "信息与电子学院",
              "label": "信息与电子学院"
            },
            {
              "key": "网络空间安全学院",
              "label": "网络空间安全学院"
            },
            {
              "key": "集成电路与电子学院",
              "label": "集成电路与电子学院"
            },
            {
              "key": "机械与车辆学院",
              "label": "机械与车辆学院"
            },
            {
              "key": "数学与统计学院",
              "label": "数学与统计学院"
            },
            {
              "key": "物理学院",
              "label": "物理学院"
            },
            {
              "key": "机电学院",
              "label": "机电学院"
            },
            {
              "key": "生命学院",
              "label": "生命学院"
            },
            {
              "key": "宇航学院",
              "label": "宇航学院"
            },
            {
              "key": "医学技术学院",
              "label": "医学技术学院"
            },
            {
              "key": "自动化学院",
              "label": "自动化学院"
            },
            {
              "key": "人文与社会科学学院",
              "label": "人文与社会科学学院"
            },
            {
              "key": "国际组织创新学院",
              "label": "国际组织创新学院"
            },
            {
              "key": "法学院学生",
              "label": "法学院学生"
            },
            {
              "key": "材料学院",
              "label": "材料学院"
            },
            {
              "key": "外国语学院",
              "label": "外国语学院"
            },
            {
              "key": "化学与化工学院",
              "label": "化学与化工学院"
            }
          ],
          "desc": "仅通知包含选中学院的课程（模糊匹配）"
        },
        {
          "id": "bit_sc_filter_grade",
          "name": "年级筛选",
          "val": "不限",
          "type": "selects",
          "items": [
            {
              "key": "不限",
              "label": "不限"
            },
            {
              "key": "2025级",
              "label": "2025级"
            },
            {
              "key": "2024级",
              "label": "2024级"
            },
            {
              "key": "2023级",
              "label": "2023级"
            },
            {
              "key": "2022级",
              "label": "2022级"
            }
          ],
          "desc": "仅通知包含选中年级的课程"
        },
        {
          "id": "bit_sc_filter_type",
          "name": "类型筛选",
          "val": "不限",
          "type": "selects",
          "items": [
            {
              "key": "不限",
              "label": "不限"
            },
            {
              "key": "本科生",
              "label": "本科生"
            },
            {
              "key": "研究生",
              "label": "研究生"
            }
          ],
          "desc": "仅通知包含选中类型的课程"
        },
        {
          "id": "bit_sc_auto_blacklist_categories",
          "name": "自动报名栏目黑名单",
          "val": [],
          "type": "checkboxes",
          "items": [
            { "key": "1", "label": "理想信念" },
            { "key": "2", "label": "科学素养" },
            { "key": "3", "label": "社会贡献" },
            { "key": "4", "label": "团队协作" },
            { "key": "5", "label": "文化互鉴" },
            { "key": "6", "label": "健康生活" }
          ],
          "desc": "选择不自动报名/捡漏的栏目 ID（可多选）。"
        },
        {
          "id": "bit_sc_runtime_sign_ids",
          "name": "运行时自动签到课程ID",
          "val": "",
          "type": "text",
          "desc": "目标课程ID（逗号/空格分隔）。无论列表接口返回与否，目标ID总会单独处理。仅设置一个ID时会跳过随机等待。与本地脚本参数等效，自动去重。autoSignAll=true时已处理过的课程会跳过。"
        },
        {
          "id": "bit_sc_auto_sign_all",
          "name": "自动签到/签退所有",
          "val": false,
          "type": "boolean",
          "desc": "开启后自动处理所有待签到/签退课程（按列表接口）；目标ID若已在列表阶段处理过则跳过重复。默认关闭。"
        }
      ],
      "author": "@Bigzhangbig",
      "repo": "https://github.com/Bigzhangbig/bit-dekt-quanx",
      "icons": [
        "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/BIT.png",
        "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/BIT.png"
      ]
      ,
      "scripts": [
        {
          "name": "取消报名 - Unenroll",
          "script": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/dekt_unenroll.js",
          "desc": "若未在 BoxJS 中指定取消报名课程ID，脚本将读取自动记录的最后一次成功报名课程（键：bit_sc_last_signup）并对其执行取消报名；取消成功后会自动将该课程ID添加到课程黑名单（键：bit_sc_blacklist）。"
        },
        {
          "name": "签到 - Sign In",
          "script": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/dekt_signin.js"
        },
        {
          "name": "我的活动 - My Activities",
          "script": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/dekt_my_activities.js"
        },
        {
          "name": "监控 - Monitor",
          "script": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/dekt_monitor.js"
        }
      ]
    },
    
    {
      "id": "bit_card",
      "name": "北理工校园卡助手",
      "keys": [
        "bit_card_min_balance",
        "bit_card_debug"
      ],
      "descs_html": [
        "请先在 Quantumult X 中添加重写规则获取 Cookie。",
        "脚本会自动抓取校园卡流水查询所需的凭证并同步到 Gist。",
        "新增：余额监控功能，低于设定值时发送通知。"
      ],
      "settings": [
        {
          "id": "bit_card_min_balance",
          "name": "余额提醒阈值",
          "val": "20",
          "type": "text",
          "desc": "当余额低于此金额(元)时发送通知"
        },
        {
          "id": "bit_card_debug",
          "name": "开启调试日志",
          "val": false,
          "type": "boolean",
          "desc": "开启后打印详细日志"
        }
      ],
      "author": "@Bigzhangbig",
      "repo": "https://github.com/Bigzhangbig/bit-dekt-quanx",
      "icons": [
        "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/BIT.png",
        "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/BIT.png"
      ],
      "scripts": [
        {
          "name": "查询余额 - Query Balance",
          "script": "https://raw.githubusercontent.com/Bigzhangbig/bit-dekt-quanx/main/card_balance.js"
        }
      ]
    },
    {
      "id": "bit_common",
      "name": "通用设置 - Gist & Cookies",
      "desc": "存放 Gist 与 Cookie 相关配置",
      "keys": [
        "bit_sc_github_token",
        "bit_sc_gist_id",
        "bit_sc_gist_filename",
        "bit_card_gist_filename",
        "bit_card_jsessionid",
        "bit_card_openid",
        "bit_sc_user_id",
        "bit_sc_token"
      ],
      "settings": [
        {
          "id": "bit_sc_github_token",
          "name": "GitHub Token",
          "val": "",
          "type": "text",
          "desc": "用于自动同步 Cookie 到 Gist (repo 权限)"
        },
        {
          "id": "bit_sc_gist_id",
          "name": "Gist ID",
          "val": "",
          "type": "text",
          "desc": "用于存储 Cookie 的 Gist ID"
        },
        {
          "id": "bit_sc_gist_filename",
          "name": "第二课堂 Gist 文件名",
          "val": "bit_cookies.json",
          "type": "text",
          "desc": "Gist 中存储第二课堂 Cookie 的文件名"
        },
        {
          "id": "bit_card_gist_filename",
          "name": "校园卡 Gist 文件名",
          "val": "bit_card_cookies.json",
          "type": "text",
          "desc": "Gist 中存储校园卡 Cookie 的文件名"
        },
        {
          "id": "bit_card_jsessionid",
          "name": "JSESSIONID (自动获取)",
          "val": "",
          "type": "text",
          "desc": "校园卡 JSESSIONID (自动获取)",
          "disabled": true
        },
        {
          "id": "bit_card_openid",
          "name": "OpenID (自动获取)",
          "val": "",
          "type": "text",
          "desc": "校园卡 OpenID (自动获取)",
          "disabled": true
        },
        {
          "id": "bit_sc_user_id",
          "name": "第二课堂 用户ID (自动获取)",
          "val": "",
          "type": "text",
          "desc": "无需手动填写，从 Token 中解析获得",
          "disabled": true
        },
        {
          "id": "bit_sc_token",
          "name": "第二课堂 Token (自动获取)",
          "val": "",
          "type": "text",
          "desc": "无需手动填写，请通过重写获取",
          "disabled": true
        }
      ],
      "author": "@Bigzhangbig",
      "repo": "https://github.com/Bigzhangbig/bit-dekt-quanx"
    }
  ],
  "boxjs": {
    "pickup_mode": "false",
    "auto_sign_all": "false",
    "chavy_boxjs_app_subCaches": "{}",
    "signup_list": "[]",
    "runtime_sign_ids": ""
  }
}
